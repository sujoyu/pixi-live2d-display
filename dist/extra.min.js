!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@pixi/core"),require("@pixi/graphics"),require("@pixi/text")):"function"==typeof define&&define.amd?define(["exports","@pixi/core","@pixi/graphics","@pixi/text"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).PIXI=t.PIXI||{},t.PIXI.live2d=t.PIXI.live2d||{}),t.PIXI,t.PIXI,t.PIXI)}(this,(function(t,e,i,s){"use strict";var o=Object.defineProperty,r=Math.pow,n=(t,e,i)=>((t,e,i)=>e in t?o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);const a=new e.Rectangle;class h extends i.Graphics{constructor(){super(),n(this,"initialized",!1),n(this,"texts",[]),n(this,"strokeWidth",4),n(this,"normalColor",14883354),n(this,"activeColor",2017330),this.eventMode="static",this.on("added",this.init).on("globalpointermove",this.onPointerMove)}init(){const t=this.parent.internalModel,e=new s.TextStyle({fontSize:24,fill:"#ffffff",stroke:"#000000",strokeThickness:4});this.texts=Object.keys(t.hitAreas).map((t=>{const i=new s.Text(t,e);return i.visible=!1,this.addChild(i),i}))}onPointerMove(t){const e=this.parent.hitTest(t.data.global.x,t.data.global.y);this.texts.forEach((t=>{t.visible=e.includes(t.text)}))}_render(t){const e=this.parent.internalModel,i=1/Math.sqrt(r(this.transform.worldTransform.a,2)+r(this.transform.worldTransform.b,2));this.texts.forEach((t=>{this.lineStyle({width:this.strokeWidth*i,color:t.visible?this.activeColor:this.normalColor});const s=e.getDrawableBounds(e.hitAreas[t.text].index,a),o=e.localTransform;s.x=s.x*o.a+o.tx,s.y=s.y*o.d+o.ty,s.width=s.width*o.a,s.height=s.height*o.d,this.drawRect(s.x,s.y,s.width,s.height),t.x=s.x+this.strokeWidth*i,t.y=s.y+this.strokeWidth*i,t.scale.set(i)})),super._render(t),this.clear()}}t.HitAreaFrames=h,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
